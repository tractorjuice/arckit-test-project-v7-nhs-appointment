# Tech Note: NHS Login and OpenID Connect Integration

## Document Control

| Field | Value |
|-------|-------|
| **Document ID** | nhs-login-oidc |
| **Document Type** | Tech Note |
| **Project** | NHS Digital Appointment Booking Service (Project 001) |
| **Classification** | OFFICIAL |
| **Status** | DRAFT |
| **Version** | 1.0 |
| **Created Date** | 2026-02-20 |
| **Last Modified** | 2026-02-20 |
| **Review Cycle** | On-Demand |
| **Next Review Date** | 2026-08-20 |
| **Owner** | Enterprise Architect, NHS Digital |
| **Reviewed By** | PENDING |
| **Approved By** | PENDING |
| **Distribution** | Project Team, Development Team |
| **Source Research** | ARC-001-RSCH-v1.0 |

## Revision History

| Version | Date | Author | Changes | Approved By | Approval Date |
|---------|------|--------|---------|-------------|---------------|
| 1.0 | 2026-02-20 | ArcKit AI | Initial creation from `/arckit:research` agent | PENDING | PENDING |

---

## Summary

NHS Login is the NHS England Digital citizen identity service providing OpenID Connect (OIDC)/OAuth 2.0 based authentication with two identity verification levels: P9 (high — biometric/documentary verification) and P5 (medium — email/phone verification). TC-003 in ARC-001-REQ-v1.0 mandates NHS Login as the sole citizen authentication method for NHS digital services — no alternative identity providers are permitted. 30 million+ citizens are already registered. The NHS login integration toolkit is published at digital.nhs.uk with sandbox test environments available. NHS Number is returned as a claim only at P9 verification level.

## Key Findings

- **Mandate**: TC-003 is a hard constraint — NHS Login is the only permitted citizen authentication provider for NHS services. There is no build vs buy decision here.
- **Flow**: OIDC Authorization Code Flow with PKCE is the required implementation pattern. NHS login integration toolkit provides step-by-step guidance.
- **Verification Levels**:
  - P9 (High): Full booking/cancellation access — NHS Number returned as claim — requires smartphone or in-person identity verification
  - P5 (Medium): View-only access per Conflict C-002 resolution — NHS Number NOT returned — upgrade prompt required
- **NHS Number**: Returned as a JWT claim at P9 only. P5 users cannot have their NHS Number verified — important for booking eligibility.
- **Proxy Service**: NHS Digital is developing a proxy service API for carer/parent booking (FR-008). Timeline not confirmed publicly — requires direct engagement with NHS Digital product team. Plan FR-008 for Phase 2.
- **Integration Timeline**: Register project with NHS login integration toolkit. Test environment available immediately. Production access requires agreement with NHS Digital and clinical safety assessment.
- **Deep Links**: NHS Login supports deep linking from reminder notifications (NHS Notify) back to appointment management — enables one-click reminder actions (FR-005 acceptance criteria).
- **Session Management**: 20-minute inactivity timeout (NFR-SEC-001) is an application-level requirement. NHS Login tokens have their own expiry; the service must implement re-authentication for booking confirmation.
- **API Gateway Integration**: AWS API Gateway HTTP API provides a native JWT authorizer that can validate NHS Login OIDC tokens without application code — recommended pattern.
- **DSPT**: NHS Login itself is GDPR compliant and maintains UK data residency. All citizen identity data remains within NHS infrastructure.

## Relevance to Projects

- **ARC-001 NHS Appointment Booking Service**: Mandatory authentication platform. Integration effort estimated at 6 person-weeks. Key dependency for FR-001, FR-008, NFR-SEC-001.

---

**Generated by**: ArcKit `/arckit:research` agent
**Generated on**: 2026-02-20
**ArcKit Version**: 2.2.0
**Project**: NHS Digital Appointment Booking Service (Project 001)
**Model**: Claude Sonnet 4.6
